<ion-view view-title="09 - Loops">
  <ion-content style="margin:0 12px">
  <div class="col-md-7 middle-col">
<h1>Loops - while, for, until, break, redo and retry</h1>
<hr>
<p>Loops in Ruby are used to execute the same block of code a specified number of times. This chapter details all the loop statements supported by Ruby.</p>
<h2>Ruby <i>while</i> Statement:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">while</span><span class="pln"> conditional </span><span class="pun">[</span><span class="kwd">do</span><span class="pun">]</span><span class="pln">
   code
</span><span class="kwd">end</span></pre>
<p>Executes <i>code</i> while <i>conditional</i> is true. A <i>while</i> loop's <i>conditional</i> is separated from <i>code</i> by the reserved word do, a newline, backslash \, or a semicolon ;.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted" style="cursor: default;"><span class="com">#!/usr/bin/ruby</span><span class="pln">

$i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
$num </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">

</span><span class="kwd">while</span><span class="pln"> $i </span><span class="pun">&lt;</span><span class="pln"> $num  </span><span class="kwd">do</span><span class="pln">
   puts</span><span class="pun">(</span><span class="str">"Inside the loop i = #$i"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
   $i </span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span></pre>
<h2>Ruby <i>while</i> modifier:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="pln">code </span><span class="kwd">while</span><span class="pln"> condition

OR

</span><span class="kwd">begin</span><span class="pln"> 
  code 
</span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">while</span><span class="pln"> conditional</span></pre>
<p>Executes <i>code</i> while <i>conditional</i> is true.</p> 
<p>If a <i>while</i> modifier follows a <i>begin</i> statement with no <i>rescue</i> or ensure clauses, <i>code</i> is executed once before conditional is evaluated.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

$i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
$num </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="kwd">begin</span><span class="pln">
   puts</span><span class="pun">(</span><span class="str">"Inside the loop i = #$i"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
   $i </span><span class="pun">+=</span><span class="lit">1</span><span class="pln">
</span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">while</span><span class="pln"> $i </span><span class="pun">&lt;</span><span class="pln"> $num</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span></pre>
<h2>Ruby <i>until</i> Statement:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">until</span><span class="pln"> conditional </span><span class="pun">[</span><span class="kwd">do</span><span class="pun">]</span><span class="pln">
   code
</span><span class="kwd">end</span></pre>
<p>Executes <i>code</i> while <i>conditional</i> is false. An <i>until</i> statement's conditional is separated from <i>code</i> by the reserved word <i>do</i>, a newline, or a semicolon.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

$i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
$num </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">

</span><span class="kwd">until</span><span class="pln"> $i </span><span class="pun">&gt;</span><span class="pln"> $num  </span><span class="kwd">do</span><span class="pln">
   puts</span><span class="pun">(</span><span class="str">"Inside the loop i = #$i"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
   $i </span><span class="pun">+=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span></pre>
<h2>Ruby <i>until</i> modifier:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="pln">code </span><span class="kwd">until</span><span class="pln"> conditional

OR

</span><span class="kwd">begin</span><span class="pln">
   code
</span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">until</span><span class="pln"> conditional</span></pre>
<p>Executes <i>code</i> while <i>conditional</i> is false.</p>
<p>If an <i>until</i> modifier follows a <i>begin</i> statement with no <i>rescue</i> or ensure clauses, <i>code</i> is executed once before <i>conditional</i> is evaluated.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

$i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
$num </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">
</span><span class="kwd">begin</span><span class="pln">
   puts</span><span class="pun">(</span><span class="str">"Inside the loop i = #$i"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
   $i </span><span class="pun">+=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">end</span><span class="pln"> </span><span class="kwd">until</span><span class="pln"> $i </span><span class="pun">&gt;</span><span class="pln"> $num</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Inside</span><span class="pln"> the loop i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span></pre>
<h2>Ruby <i>for</i> Statement:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">for</span><span class="pln"> variable </span><span class="pun">[,</span><span class="pln"> variable </span><span class="pun">...]</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> expression </span><span class="pun">[</span><span class="kwd">do</span><span class="pun">]</span><span class="pln">
   code
</span><span class="kwd">end</span></pre>
<p>Executes <i>code</i> once for each element in <i>expression</i>.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">
   puts </span><span class="str">"Value of local variable is #{i}"</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>Here, we have defined the range 0..5. The statement for i in 0..5 will allow i to take values in the range from 0 to 5 (including 5). This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">5</span></pre>
<p>A <i>for...in</i> loop is almost exactly equivalent to:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="pun">(</span><span class="pln">expression</span><span class="pun">).</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">variable</span><span class="pun">[,</span><span class="pln"> variable</span><span class="pun">...]|</span><span class="pln"> code </span><span class="kwd">end</span></pre>
<p>except that a for loop doesn't create a new scope for local variables. A for loop's <i>expression</i> is separated from <i>code</i> by the reserved word do, a newline, or a semicolon.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

</span><span class="pun">(</span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pun">).</span><span class="pln">each </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">|</span><span class="pln">i</span><span class="pun">|</span><span class="pln">
   puts </span><span class="str">"Value of local variable is #{i}"</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">5</span></pre>
<h2>Ruby <i>break</i> Statement:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">break</span></pre>
<p>Terminates the most internal loop. Terminates a method with an associated block if called within the block (with the method returning nil).</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">
   </span><span class="kwd">if</span><span class="pln"> i </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
      </span><span class="kwd">break</span><span class="pln">
   </span><span class="kwd">end</span><span class="pln">
   puts </span><span class="str">"Value of local variable is #{i}"</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span></pre>
<h2>Ruby <i>next</i> Statement:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">next</span></pre>
<p>Jumps to next iteration of the most internal loop. Terminates execution of a block if called within a block (with <i>yield</i> or call returning nil).</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">
   </span><span class="kwd">if</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
      </span><span class="kwd">next</span><span class="pln">
   </span><span class="kwd">end</span><span class="pln">
   puts </span><span class="str">"Value of local variable is #{i}"</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">3</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">4</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">5</span></pre>
<h2>Ruby <i>redo</i> Statement:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">redo</span></pre>
<p>Restarts this iteration of the most internal loop, without checking loop condition. Restarts <i>yield</i> or <i>call</i> if called within a block.</p>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">0.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">
   </span><span class="kwd">if</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span><span class="pln">
      puts </span><span class="str">"Value of local variable is #{i}"</span><span class="pln">
      </span><span class="kwd">redo</span><span class="pln">
   </span><span class="kwd">end</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result and will go in an infinite loop:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
</span><span class="pun">............................</span></pre>
<h2>Ruby <i>retry</i> Statement:</h2>
<h2>Syntax:</h2>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">retry</span></pre>
<p>If <i>retry</i> appears in rescue clause of begin expression, restart from the beginning of the 1begin body.</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">begin</span><span class="pln">
   do_something </span><span class="com"># exception raised</span><span class="pln">
</span><span class="kwd">rescue</span><span class="pln">
   </span><span class="com"># handles error</span><span class="pln">
   </span><span class="kwd">retry</span><span class="pln">  </span><span class="com"># restart from beginning</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>If retry appears in the iterator, the block, or the body of the for expression, restarts the invocation of the iterator call. Arguments to the iterator is re-evaluated.</p>
<pre class="prettyprint notranslate prettyprinted"><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">
   </span><span class="kwd">retry</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> some_condition </span><span class="com"># restart from i == 1</span><span class="pln">
</span><span class="kwd">end</span></pre>
<h2>Example:</h2>
<pre class="prettyprint notranslate tryit prettyprinted" style="cursor: default;"><span class="com">#!/usr/bin/ruby</span><span class="pln">

</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> </span><span class="lit">1.</span><span class="pun">.</span><span class="lit">5</span><span class="pln">
   </span><span class="kwd">retry</span><span class="pln"> </span><span class="kwd">if</span><span class="pln">  i </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
   puts </span><span class="str">"Value of local variable is #{i}"</span><span class="pln">
</span><span class="kwd">end</span></pre>
<p>This will produce the following result and will go in an infinite loop:</p>
<pre class="prettyprint notranslate prettyprinted"><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
</span><span class="typ">Value</span><span class="pln"> of </span><span class="kwd">local</span><span class="pln"> variable </span><span class="kwd">is</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span><span class="pun">............................</span></pre>
</div>
 </ion-content>
</ion-view>
