<ion-view view-title="15 - Hashes">
 <ion-content style="margin:0 12px">
 <div class="col-md-7 middle-col">
<h1>Hashes</h1>
<hr>
<p>A Hash is a collection of key-value pairs like this: "employee" =&gt; "salary". It is similar to an Array, except that indexing is done via arbitrary keys of any object type, not an integer index.</p>
<p>The order in which you traverse a hash by either key or value may seem arbitrary and will generally not be in the insertion order. If you attempt to access a hash with a key that does not exist, the method will return <i>nil</i>.</p>
<h2>Creating Hashes:</h2>
<p>As with arrays, there is a variety of ways to create hashes. You can create an empty hash with the <i>new</i> class method:</p>
<pre class="prettyprint prettyprinted"><span class="pln">months </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span></pre>
<p>You can also use <i>new</i> to create a hash with a default value, which is otherwise just <i>nil</i>:</p>
<pre class="prettyprint prettyprinted"><span class="pln">months </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="pln"> </span><span class="str">"month"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">

</span><span class="kwd">or</span><span class="pln">

months </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pln"> </span><span class="str">"month"</span></pre>
<p>When you access any key in a hash that has a default value, if the key or value doesn't exist, accessing the hash will return the default value:</p>
<pre class="prettyprint tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

months </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="pln"> </span><span class="str">"month"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">

puts </span><span class="str">"#{months[0]}"</span><span class="pln">
puts </span><span class="str">"#{months[72]}"</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint prettyprinted"><span class="pln">month
month</span></pre>
<pre class="prettyprint tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

H </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">[</span><span class="str">"a"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="lit">100</span><span class="pun">,</span><span class="pln"> </span><span class="str">"b"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="lit">200</span><span class="pun">]</span><span class="pln">

puts </span><span class="str">"#{H['a']}"</span><span class="pln">
puts </span><span class="str">"#{H['b']}"</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint prettyprinted"><span class="lit">100</span><span class="pln">
</span><span class="lit">200</span></pre>
<p>You can use any Ruby object as a key or value, even an array, so following example is a valid one:</p>
<pre class="prettyprint prettyprinted"><span class="pun">[</span><span class="lit">1</span><span class="pun">,</span><span class="str">"jan"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"January"</span></pre>
<h2>Hash Built-in Methods:</h2>
<p>We need to have an instance of Hash object to call a Hash method. As we have seen, following is the way to create an instance of Hash object:</p>
<pre class="prettyprint prettyprinted"><span class="typ">Hash</span><span class="pun">[[</span><span class="pln">key </span><span class="pun">=&gt;|,</span><span class="pln"> value</span><span class="pun">]*</span><span class="pln"> </span><span class="pun">]</span><span class="pln"> </span><span class="kwd">or</span><span class="pln">

</span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">or</span><span class="pun">]</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">or</span><span class="pun">]</span><span class="pln">

</span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">|</span><span class="pln">hash</span><span class="pun">,</span><span class="pln"> key</span><span class="pun">|</span><span class="pln"> block </span><span class="pun">}</span></pre>
<p>This will return a new hash populated with the given objects. Now using created object we can call any available instance methods. For example:</p>
<pre class="prettyprint tryit prettyprinted"><span class="com">#!/usr/bin/ruby</span><span class="pln">

$</span><span class="pun">,</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">", "</span><span class="pln">
months </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Hash</span><span class="pun">.</span><span class="kwd">new</span><span class="pun">(</span><span class="pln"> </span><span class="str">"month"</span><span class="pln"> </span><span class="pun">)</span><span class="pln">

months </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">"1"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"January"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"2"</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"February"</span><span class="pun">}</span><span class="pln">

keys </span><span class="pun">=</span><span class="pln"> months</span><span class="pun">.</span><span class="pln">keys

puts </span><span class="str">"#{keys}"</span></pre>
<p>This will produce the following result:</p>
<pre class="prettyprint prettyprinted"><span class="pun">[</span><span class="str">"1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"2"</span><span class="pun">]</span></pre>
<p>Following are the public hash methods (assuming <i>hash</i> is an array object ):</p>
<table class="src">
<tbody><tr>
<th style="width:5%">SN</th>
<th>Methods with Description</th>
</tr>
<tr>
<td>1</td>
<td><b>hash == other_hash</b>
<p>Tests whether two hashes are equal, based on whether they have the same number of key-value pairs, and whether the key-value pairs match the corresponding pair in each hash.</p></td>
</tr>
<tr>
<td>2</td>
<td><b>hash.[key]</b>
<p>Using a key, references a value from hash. If the key is not found, returns a default value.</p></td>
</tr>
<tr>
<td>3</td>
<td><b>hash.[key]=value</b>
<p>Associates the value given by <i>value</i> with the key given by <i>key</i>.</p></td>
</tr>
<tr>
<td>4</td>
<td><b>hash.clear</b>
<p>Removes all key-value pairs from hash.</p></td>
</tr>
<tr>
<td>5</td>
<td><b>hash.default(key = nil)</b>
<p>Returns the default value for <i>hash</i>, nil if not set by default=. ([] returns a default value if the key does not exist in <i>hash</i>.)</p></td>
</tr>
<tr>
<td>6</td>
<td><b>hash.default = obj</b>
<p>Sets a default value for <i>hash</i>.</p></td>
</tr>
<tr>
<td>7</td>
<td><b>hash.default_proc</b>
<p>Returns a block if <i>hash</i> was created by a block.</p></td>
</tr>
<tr>
<td>8</td>
<td><p><b>hash.delete(key) [or]</b></p>
<p><b>array.delete(key) { |key| block }</b>
</p><p>Deletes a key-value pair from <i>hash</i> by <i>key</i>. If block is used, returns the result of a block if pair is not found. Compare <i>delete_if</i>.</p></td>
</tr>
<tr>
<td>9</td>
<td><b>hash.delete_if { |key,value| block }</b>
<p>Deletes a key-value pair from <i>hash</i> for every pair the block evaluates to <i>true</i>.</p></td>
</tr>
<tr>
<td>10</td>
<td><b>hash.each { |key,value| block }</b>
<p>Iterates over <i>hash</i>, calling the block once for each key, passing the key-value as a two-element array.</p></td>
</tr>
<tr>
<td>11</td>
<td><b>hash.each_key { |key| block }</b>
<p>Iterates over <i>hash</i>, calling the block once for each key, passing <i>key</i> as a parameter.</p></td>
</tr>
<tr>
<td>12</td>
<td><b>hash.each_key { |key_value_array| block }</b>
<p>Iterates over <i>hash</i>, calling the block once for each <i>key</i>, passing the <i>key</i> and <i>value</i> as parameters.</p></td>
</tr>
<tr>
<td>13</td>
<td><b>hash.each_key { |value| block }</b>
<p>Iterates over <i>hash</i>, calling the block once for each <i>key</i>, passing <i>value</i> as a parameter.</p></td>
</tr>
<tr>
<td>14</td>
<td><b>hash.empty?</b>
<p>Tests whether hash is empty (contains no key-value pairs), returning <i>true</i> or <i>false</i>.</p></td>
</tr>
<tr>
<td>15</td>
<td><p><b>hash.fetch(key [, default] ) [or]</b></p>
<p><b>hash.fetch(key) { | key | block }</b></p>
<p>Returns a value from <i>hash</i> for the given <i>key</i>. If the <i>key</i> can't be found, and there are no other arguments, it raises an <i>IndexError</i> exception; if <i>default</i> is given, it is returned; if the optional block is specified, its result is returned.</p></td>
</tr>
<tr>
<td>16</td>
<td><p><b>hash.has_key?(key) [or] hash.include?(key) [or]</b></p>
<p><b>hash.key?(key) [or] hash.member?(key)</b></p>
<p>Tests whether a given <i>key</i> is present in hash, returning <i>true</i> or <i>false</i>.</p></td>
</tr>
<tr>
<td>17</td>
<td><b>hash.has_value?(value)</b>
<p>Tests whether hash contains the given <i>value</i>.</p></td>
</tr>
<tr>
<td>18</td>
<td><b>hash.index(value)</b>
<p>Returns the <i>key</i> for the given <i>value</i> in hash, <i>nil</i> if no
matching value is found.</p></td>
</tr>
<tr>
<td>19</td>
<td><b>hash.indexes(keys)</b>
<p>Returns a new array consisting of values for the given key(s). Will insert the default value for keys that are not found. This method is deprecated. Use select.</p></td>
</tr>
<tr>
<td>20</td>
<td><b>hash.indices(keys)</b>
<p>Returns a new array consisting of values for the given key(s). Will insert the default value for keys that are not found. This method is deprecated. Use select.</p></td>
</tr>
<tr>
<td>21</td>
<td><b>hash.inspect</b>
<p>Returns a pretty print string version of hash.</p></td>
</tr>
<tr>
<td>22</td>
<td><b>hash.invert</b>
<p>Creates a new <i>hash</i>, inverting <i>keys</i> and <i>values</i> from <i>hash</i>; that is, in the new hash, the keys from <i>hash</i> become values and values become keys.</p></td>
</tr>
<tr>
<td>23</td>
<td><b>hash.keys</b>
<p>Creates a new array with keys from <i>hash</i>.</p></td>
</tr>
<tr>
<td>24</td>
<td><b>hash.length</b>
<p>Returns the size or length of <i>hash</i> as an integer.</p></td>
</tr>
<tr>
<td>25</td>
<td><p><b>hash.merge(other_hash) [or]</b></p>
<p><b>hash.merge(other_hash) { |key, oldval, newval| block }</b></p>
<p>Returns a new hash containing the contents of <i>hash</i> and
<i>other_hash</i>, overwriting pairs in hash with duplicate keys with those from <i>other_hash</i>.</p></td>
</tr>
<tr>
<td>26</td>
<td><p><b>hash.merge!(other_hash) [or]</b></p>
<p><b>hash.merge!(other_hash) { |key, oldval, newval| block }</b></p>
<p>Same as merge, but changes are done in place.</p></td>
</tr>
<tr>
<td>27</td>
<td><b>hash.rehash</b>
<p>Rebuilds <i>hash</i> based on the current values for each <i>key</i>. If values have changed since they were inserted, this method reindexes <i>hash</i>.</p></td>
</tr>
<tr>
<td>28</td>
<td><b>hash.reject { |key, value| block }</b>
<p>Creates a new <i>hash</i> for every pair the <i>block</i> evaluates to
<i>true</i></p></td>
</tr>
<tr>
<td>29</td>
<td><b>hash.reject! { |key, value| block }</b>
<p>Same as <i>reject</i>, but changes are made in place.</p></td>
</tr>
<tr>
<td>30</td>
<td><b>hash.replace(other_hash)</b>
<p>Replaces the contents of <i>hash</i> with the contents of <i>other_hash</i>.</p></td>
</tr>
<tr>
<td>31</td>
<td><b>hash.select { |key, value| block }</b>
<p>Returns a new array consisting of key-value pairs from <i>hash</i> for which the <i>block</i> returns <i>true</i>.</p></td>
</tr>
<tr>
<td>32</td>
<td><b>hash.shift</b>
<p>Removes a key-value pair from <i>hash</i>, returning it as a two-element array.</p></td>
</tr>
<tr>
<td>33</td>
<td><b>hash.size</b>
<p>Returns the <i>size</i> or length of <i>hash</i> as an integer.</p></td>
</tr>
<tr>
<td>34</td>
<td><b>hash.sort</b>
<p>Converts <i>hash</i> to a two-dimensional array containing arrays of key-value pairs, then sorts it as an array.</p></td>
</tr>
<tr>
<td>35</td>
<td><b>hash.store(key, value)</b>
<p>Stores a key-value pair in <i>hash</i>.</p></td>
</tr>
<tr>
<td>36</td>
<td><b>hash.to_a</b>
<p>Creates a two-dimensional array from hash. Each key/value pair is converted to an array, and all these arrays are stored in a containing array.</p></td>
</tr>
<tr>
<td>37</td>
<td><b>hash.to_hash</b>
<p>Returns <i>hash</i> (self).</p></td>
</tr>
<tr>
<td>38</td>
<td><b>hash.to_s</b>
<p>Converts <i>hash</i> to an array, then converts that array to a string.</p></td>
</tr>
<tr>
<td>39</td>
<td><p><b>hash.update(other_hash) [or]</b></p>
<p><b>hash.update(other_hash) {|key, oldval, newval| block}</b></p>
<p>Returns a new hash containing the contents of <i>hash</i> and <i>other_hash</i>, overwriting pairs in <i>hash</i> with duplicate keys with those from <i>other_hash</i>.</p></td>
</tr>
<tr>
<td>40</td>
<td><b>hash.value?(value)</b>
<p>Tests whether <i>hash</i> contains the given <i>value</i>.</p></td>
</tr>
<tr>
<td>41</td>
<td><b>hash.values</b>
<p>Returns a new array containing all the values of <i>hash</i>.</p></td>
</tr>
<tr>
<td>42</td>
<td><b>hash.values_at(obj, ...)</b>
<p>Returns a new array containing the values from <i>hash</i> that
are associated with the given key or keys.</p></td>
</tr>
</tbody></table>
</div> 
 </ion-content>
</ion-view>