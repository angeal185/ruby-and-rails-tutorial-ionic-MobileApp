<ion-view view-title="06 - Database Setup">
<ion-content style="margin:0 12px">
<div class="col-md-7 middle-col">
<h1>Database Setup</h1>
<hr>
<p>Before starting with this chapter, make sure your database server is up and running. Ruby on Rails recommends to create three databases - a database each for development, testing, and production environment. According to convention, their names should be &#x2212;</p>
<ion-list>
<li>library_development</li>
<li>library_production</li>
<li>library_test</li>
</ion-list>
<p>You should initialize all three of them and create a user and password for them with full read and write privileges. We are using the <b>root</b> user ID for our application.</p>
<h2>Database Setup for MySQL</h2>
<p>In MySQL, we are using the <b>root</b> user ID for our application. The MySQL console session in which you do this looks something like &#x2212;</p>
<pre class="result notranslate">
mysql&gt; create database library_development;
Query OK, 1 row affected (0.01 sec)

mysql&gt; grant all privileges on library_development.*
to &apos;root&apos;@&apos;localhost&apos; identified by &apos;password&apos;;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; FLUSH PRIVILEGES;
Query OK, 0 rows affected (0.00 sec)
</pre>
<p>You can do the same thing for two more databases <b>library_production</b> and <b>library_test</b>.</p>
<h2>Configuring database.yml</h2>
<p>At this point, you need to let Rails know about the user name and password for the databases. You do this in the file <b>database.yml</b>, available in the <b>library\config</b> subdirectory of Rails Application you created. This file has live configuration sections for MySQL databases. In each of the sections you use, you need to change the username and password lines to reflect the permissions on the databases you&apos;ve created.</p> 
<p>When you finish, it should look something like &#x2212;</p>
<pre class="result notranslate">
development:
   adapter: mysql
   database: library_development
   username: root
   password: [password]
   host: localhost
	
test:
   adapter: mysql
   database: library_test
   username: root
   password: [password]
   host: localhost
   
production:
   adapter: mysql
   database: library_production
   username: root
   password: [password]
   host: localhost
</pre>
<h2>Database Setup for PostgreSQL</h2>
<p>By default, PostgreSQL does not provide any users. We have to create new users. Use the following command to create a user with the name <b>rubyuser</b>.</p>
<pre class="result notranslate">
tp&gt; sudo -u postgres createuser rubyuser -s
</pre>
<p>If you want to create a password for the new user, then use the following command.</p>
<pre class="result notranslate">
tp&gt; sudo -u postgres psql

postgres=# \password rubyuser
</pre>
<p>Use the following command for creating a database <b>library_development</b>.</p>
<pre class="result notranslate">
postgres=# CREATE DATABASE library_development OWNER rubyuser; 

CREATE DATABASE
</pre>
<p>Use the following command for creating a database <b>library_production</b>.</p>
<pre class="result notranslate">
postgres=# CREATE DATABASE library_production OWNER rubyuser; 

CREATE DATABASE
</pre>
<p>Use the following command for creating a database <b>library_test</b>.</p>
<pre class="result notranslate">
postgres=# CREATE DATABASE library_test OWNER rubyuser; 

CREATE DATABASE
</pre>
<p>Press <b>Ctrl+D</b> to terminate PosgreSQL.</p>
<h2>Configuring database.yml</h2>  
<p>At this point, you need to let Rails know the username and password for the databases. You do this in the file <b>database.yml</b>, available in the <b>library\config</b> subdirectory of Rails Application you created. This file has live configuration sections for PostgreSQL databases. In each of the sections, you need to change the username and password lines to reflect the permissions on the databases you&apos;ve created.</p> 
<p>When you finish, it should look as follows &#x2212;</p>
<pre class="result notranslate">
default: &amp;default
   adapter: postgresql
   encoding: unicode
  
development:
   adapter: postgresql
   encoding: unicode
   database: library_development
   username: rubyuser
   password: &lt;Password for rubyuser&gt;

test:
   adapter: postgresql
   encoding: unicode
   database: library_test
   username: rubyuser
   password: &lt;Password for rubyuser&gt;
 
production:
   adapter: postgresql
   encoding: unicode
   database: library_production
   username: rubyuser
   password: &lt;Password for rubyuser&gt;
</pre>
<h2>What is Next?</h2>
<p>The next two chapters explain how to model your database tables and how to manage those using Rails Migrations.</p>
</div>
</ion-content>
</ion-view>